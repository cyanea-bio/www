{% extends "base.html" %}

{% block title %}{{ page.title }} | Learn | {{ config.title }}{% endblock %}
{% block description %}{{ page.description | default(value=config.description) }}{% endblock %}

{% block og_title %}{{ page.title }}{% endblock %}
{% block og_description %}{{ page.description | default(value=config.description) }}{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "LearningResource",
    "name": "{{ page.title }}",
    "description": "{{ page.description | default(value='') }}",
    "url": "{{ current_url | safe }}",
    {% if page.extra.difficulty %}"educationalLevel": "{{ page.extra.difficulty }}",{% endif %}
    "learningResourceType": "Interactive simulation",
    {% if page.extra.duration %}"timeRequired": "{{ page.extra.duration }}",{% endif %}
    {% if page.extra.domain %}"teaches": "{{ page.extra.domain }}",{% endif %}
    "isAccessibleForFree": true
}
</script>
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "Home", "item": "{{ config.base_url }}/" },
        { "@type": "ListItem", "position": 2, "name": "Learn", "item": "{{ config.base_url }}/learn/" },
        { "@type": "ListItem", "position": 3, "name": "{{ page.title }}" }
    ]
}
</script>
{% endblock %}

{% block head %}
<link rel="preload" href="/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin>
{% if page.slug == "protein-structure-viewer" %}
<script src="https://3dmol.csb.pitt.edu/build/3Dmol-min.js"></script>
{% endif %}
{% endblock %}

{% block content %}
<div class="learn-detail">
    <div class="learn-detail-header">
        <nav aria-label="Breadcrumb">
            <ol class="breadcrumb">
                <li><a href="/">Home</a></li>
                <li><a href="/learn/">Learn</a></li>
                <li aria-current="page">{{ page.title }}</li>
            </ol>
        </nav>
        <h1>{{ page.title }}</h1>
        <div class="learn-detail-meta">
            {% if page.extra.difficulty %}
            <span class="learn-difficulty level-{{ page.extra.difficulty_level }}">{{ page.extra.difficulty }}</span>
            {% endif %}
            {% if page.extra.domain %}
            <span class="learn-detail-domain">{{ page.extra.domain }}</span>
            {% endif %}
            {% if page.extra.duration %}
            <span class="learn-detail-duration">{{ page.extra.duration }}</span>
            {% endif %}
            {% if page.extra.papers %}
            <span class="learn-detail-papers">{{ page.extra.papers }} paper{{ page.extra.papers | pluralize }}</span>
            {% endif %}
        </div>
    </div>

    <div class="learn-detail-preview" id="sim-container">
        <div class="sim-loading">Loading simulation&hellip;</div>
    </div>

    {% if page.description %}
    <p class="learn-detail-description">{{ page.description }}</p>
    {% endif %}

    <div class="learn-detail-content">
        {{ page.content | safe }}
    </div>

    {% if page.extra.crates %}
    <div class="learn-detail-crates">
        <h4>Powered by</h4>
        <div class="learn-detail-crate-list">
            {% for crate in page.extra.crates %}
            <span class="labs-crate-pill">{{ crate }}</span>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% if page.extra.tags %}
    <div class="learn-detail-tags">
        {% for tag in page.extra.tags %}
        <span class="hub-card-tag">{{ tag }}</span>
        {% endfor %}
    </div>
    {% endif %}

    <div class="learn-detail-footer">
        <a href="/learn/" class="btn btn-outline">&larr; Back to all simulations</a>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module" src="/js/sims/{{ page.slug }}.js"></script>
{% endblock %}
